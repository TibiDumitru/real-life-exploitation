import logo from './logo.svg';
import './App.css';
import React, {useState} from 'react';
import {addCve, getCve} from './api';

function App() {
  const [cve, setCve] = useState({cve: '', name: '', prerequisites: []});
  const [cveId, setCveId] = useState('');

  const [formData, setFormData] = useState({
    cve: '',
    name: '',
    prerequisites: ''
  });

  const handleAddCve = (e) => {
    e.preventDefault();
    addCve(formData).then(response => {
      console.log(response);
    });
  }

  const handleGetCve = () => {
    getCve(cveId).then(response => {
      setCve(response.data);
    });
  }

  // Update formData state on change
  const handleChange = (e) => {
    setFormData({...formData, [e.target.name]: e.target.value});
  }

  return (
    <div>
      <form onSubmit={handleAddCve}>
        <label>
          Cve:
          <input type='text' name='cve' value={formData.cve} onChange={handleChange} />
        </label>
        <label>
          Name:
          <input type='text' name='name' value={formData.name} onChange={handleChange} />
        </label>
        <label>
          Prerequisites:
          <input type='text' name='prerequisites' value={formData.prerequisites} onChange={handleChange} />
        </label>
        <button
          type='submit'
          disabled={cve.cve === '' || cve.name === '' || cve.prerequisites === []}
        >
          Add Cve
        </button>
      </form>
      {/* <input type='text' placeholder='Enter cve ID' onChange={e => setCveId(e.target.value)} />
      <button onClick={handleGetCve}>Get Cve</button>
      <div>
        {cve.cve} - {cve.name}
      </div> */}
    </div>
  );
}

export default App;
